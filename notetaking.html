<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="/css/notetaking.css">
		<title> Take Note </title>
	</head>
	<body>
		<a href="/list">
			<div class="backToList">
<svg class="back"
   width="100"
   height="100"
   viewBox="0 0 26.458333 26.458333"
   version="1.1"
   id="svg5"
   inkscape:version="1.2.2 (b0a8486541, 2022-12-01)"
   sodipodi:docname="back.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview7"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:lockguides="true"
     inkscape:zoom="3.9912249"
     inkscape:cx="50.235204"
     inkscape:cy="47.353883"
     inkscape:window-width="1854"
     inkscape:window-height="951"
     inkscape:window-x="0"
     inkscape:window-y="20"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1" />
  <defs
     id="defs2" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <path
       style="fill:none;stroke:#000000;stroke-width:3.165;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none"
       d="M 11.864972,2.385322 C 0,13.229167 0,13.229167 12.063846,23.863691"
       id="path3804"
       sodipodi:nodetypes="cc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:3.16499531;stroke-linecap:round;stroke-dasharray:none"
       d="M 10.073945,12.993087 H 23.133324"
       id="path3806"
       sodipodi:nodetypes="cc" />
  </g>
</svg>

				<div class="title">Back to List</div>
				<p></p>
			</div>
		</a>
		<div class="content">
		<textarea id="note"></textarea>
		<div class="commitArea">
		<input type="button" class="commitButton" id="commitButton" value="Commit" />
		<input type="button" class="deleteButton" id="deleteButton" value="Delete" />
<svg class="save"
   width="100"
   height="100"
   viewBox="0 0 26.458333 26.458333"
   version="1.1"
   id="svg8287"
   inkscape:version="1.2.2 (b0a8486541, 2022-12-01)"
   sodipodi:docname="save.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview8289"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="3.9912249"
     inkscape:cx="29.439584"
     inkscape:cy="70.655001"
     inkscape:window-width="1854"
     inkscape:window-height="951"
     inkscape:window-x="0"
     inkscape:window-y="20"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1" />
  <defs
     id="defs8284" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <circle
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none"
       id="path13911"
       cx="13.229166"
       cy="13.229166"
       r="10.23794" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none"
       d="M 7.1594561,13.229166 13.229167,19.158174 24.367106,4.9055533"
       id="path13913" />
  </g>
</svg>
<svg class="delete"
   width="100"
   height="100"
   viewBox="0 0 26.458333 26.458333"
   version="1.1"
   id="svg17675"
   inkscape:version="1.2.2 (b0a8486541, 2022-12-01)"
   sodipodi:docname="delete.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview17677"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="5.6444444"
     inkscape:cx="15.324803"
     inkscape:cy="43.405512"
     inkscape:window-width="1854"
     inkscape:window-height="951"
     inkscape:window-x="0"
     inkscape:window-y="20"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1" />
  <defs
     id="defs17672" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <circle
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none"
       id="path13911"
       cx="13.229167"
       cy="13.229167"
       r="10.23794" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round"
       d="M 8.428125,7.9359375 18.421875,18.375"
       id="path22709"
       sodipodi:nodetypes="cc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round"
       d="M 8.203125,18.703125 18.585937,7.9921875"
       id="path22711"
       sodipodi:nodetypes="cc" />
  </g>
</svg>

		</div>
		<div id="submit"></div>
		</div>
		<script>
			var note = window.location.hash;
			const xhr = new XMLHttpRequest();
			xhr.open("GET", "/api/readNote/" + localStorage.getItem("token") + "/" + note.toString().split('#')[1], true);
			xhr.onload = () => {
				var noteText = document.getElementById("note");
				noteText.value = xhr.responseText.toString().replace(/~n/g, '\n');
			};
			xhr.send();

			var commitButton = document.getElementById("commitButton");
			var deleteButton = document.getElementById("deleteButton");
			deleteButton.onclick = () => {
				console.log("click");
				var form = document.createElement("form");
				var token = document.createElement("input");
				var noteName = document.createElement("input");
				var deleteL = document.createElement("input");
				var submitButton = document.createElement("input");
				form.method = "post";
				token.type="text";
				token.name="token";
				token.value=localStorage.getItem("token");
				noteName.type = "text";
				noteName.name = "noteName";
				noteName.value = window.location.hash;
				deleteL.type = "text";
				deleteL.name = "deleteL";
				deleteL.value = "delete";
				submitButton.type="submit";
				form.appendChild(token);
				form.appendChild(noteName);
				form.appendChild(deleteL);
				form.appendChild(submitButton);
				document.getElementById("submit").appendChild(form);
				submitButton.click();
			};
				
			commitButton.onclick = () => {
				console.log("upload");
				var noteText = document.getElementById("note").value.toString().replace(/\n/g, "~n");
				var form = document.createElement("form");
				var text = document.createElement("input");
				var noteName = document.createElement("input");
				var token = document.createElement("input");
				var submitButton = document.createElement("input");
				form.method = "post";
				text.type = "text";
				text.name = "text";
				text.value = noteText;
				noteName.type = "text";
				noteName.name = "noteName";
				noteName.value = window.location.hash.toString();
				token.type = "text";
				token.name = "token";
				token.value = localStorage.getItem("token");
				submitButton.type="submit";
				form.appendChild(text);
				form.appendChild(noteName);
				form.appendChild(token);
				form.appendChild(submitButton);
				document.getElementById("submit").appendChild(form);
				submitButton.click();
			};
		</script>
	</body>
</html>
