<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="/css/notetaking.css">
		<title> Take Note </title>
	</head>
	<body>
		<a href="/list">
			<div class="backToList">
<svg class="back"
   width="100"
   height="100"
   viewBox="0 0 26.458333 26.458333"
   version="1.1"
   id="svg5"
   inkscape:version="1.2.2 (b0a8486541, 2022-12-01)"
   sodipodi:docname="back.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview7"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:lockguides="true"
     inkscape:zoom="3.9912249"
     inkscape:cx="50.235204"
     inkscape:cy="47.353883"
     inkscape:window-width="1854"
     inkscape:window-height="951"
     inkscape:window-x="0"
     inkscape:window-y="20"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1" />
  <defs
     id="defs2" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <path
       style="fill:none;stroke:#000000;stroke-width:3.165;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none"
       d="M 11.864972,2.385322 C 0,13.229167 0,13.229167 12.063846,23.863691"
       id="path3804"
       sodipodi:nodetypes="cc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:3.16499531;stroke-linecap:round;stroke-dasharray:none"
       d="M 10.073945,12.993087 H 23.133324"
       id="path3806"
       sodipodi:nodetypes="cc" />
  </g>
</svg>

				<div class="title">Back to List</div>
				<p></p>
			</div>
		</a>
		<div class="content">
		<textarea id="note"></textarea>
		<div class="commitArea">
		<input type="button" class="commitButton" id="commitButton" value="Commit" />
		<input type="button" class="deleteButton" id="deleteButton" value="Delete" />
<svg class="save"
   width="100"
   height="100"
   viewBox="0 0 26.458333 26.458333"
   version="1.1"
   id="svg8287"
   inkscape:version="1.2.2 (b0a8486541, 2022-12-01)"
   sodipodi:docname="save.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview8289"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="3.9912249"
     inkscape:cx="29.439584"
     inkscape:cy="70.655001"
     inkscape:window-width="1854"
     inkscape:window-height="951"
     inkscape:window-x="0"
     inkscape:window-y="20"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1" />
  <defs
     id="defs8284" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <circle
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none"
       id="path13911"
       cx="13.229166"
       cy="13.229166"
       r="10.23794" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none"
       d="M 7.1594561,13.229166 13.229167,19.158174 24.367106,4.9055533"
       id="path13913" />
  </g>
</svg>
<svg class="delete"
   width="100"
   height="100"
   viewBox="0 0 26.458333 26.458333"
   version="1.1"
   id="svg17675"
   inkscape:version="1.2.2 (b0a8486541, 2022-12-01)"
   sodipodi:docname="delete.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview17677"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="5.6444444"
     inkscape:cx="15.324803"
     inkscape:cy="43.405512"
     inkscape:window-width="1854"
     inkscape:window-height="951"
     inkscape:window-x="0"
     inkscape:window-y="20"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1" />
  <defs
     id="defs17672" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <circle
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none"
       id="path13911"
       cx="13.229167"
       cy="13.229167"
       r="10.23794" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round"
       d="M 8.428125,7.9359375 18.421875,18.375"
       id="path22709"
       sodipodi:nodetypes="cc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round"
       d="M 8.203125,18.703125 18.585937,7.9921875"
       id="path22711"
       sodipodi:nodetypes="cc" />
  </g>
</svg>
		</div>
		<div id="showMarkdown" class="showMarkdown">
		<input type="button" value="Show Markdown" class="showMarkdown" id="markdown" />
<svg class="showMarkdown"
   width="100"
   height="100"
   viewBox="0 0 26.458334 26.458333"
   version="1.1"
   id="svg5"
   inkscape:version="1.1.2 (0a00cf5339, 2022-02-04)"
   sodipodi:docname="markdown.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview7"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:document-units="mm"
     showgrid="false"
     units="px"
     width="100px"
     inkscape:zoom="11.623035"
     inkscape:cx="43.878385"
     inkscape:cy="61.687847"
     inkscape:window-width="1920"
     inkscape:window-height="1080"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1" />
  <defs
     id="defs2" />
  <g
     inkscape:groupmode="layer"
     id="layer2"
     inkscape:label="图层 2">
    <text
       xml:space="preserve"
       style="font-style:normal;font-weight:normal;font-size:13.3127px;line-height:1.25;font-family:sans-serif;fill:#b8f2c0;fill-opacity:1;stroke:none;stroke-width:0.332818"
       x="5.3184266"
       y="21.884317"
       id="text948"
       transform="scale(1.2578946,0.79497915)"><tspan
         sodipodi:role="line"
         id="tspan946"
         style="stroke-width:0.332818;fill:#b8f2c0;fill-opacity:1"
         x="5.3184266"
         y="21.884317">M</tspan></text>
  </g>
  <g
     inkscape:groupmode="layer"
     id="layer3"
     inkscape:label="图层 3">
    <path
       style="color:#000000;fill:#b8f2c0;stroke:#1e5ec6;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;-inkscape-stroke:none;fill-opacity:1"
       d="m 13.394531,7.0253906 c -0.800965,4.317e-4 -1.449865,0.6502067 -1.449218,1.4511719 V 18.730469 c 4.31e-4,0.800202 0.649016,1.448787 1.449218,1.449218 0.800965,6.48e-4 1.45074,-0.648253 1.451172,-1.449218 V 8.4765625 C 14.846351,7.674834 14.196259,7.0247423 13.394531,7.0253906 Z"
       id="path3438"
       sodipodi:nodetypes="ccccccc" />
  </g>
  <g
     inkscape:label="图层 1"
     inkscape:groupmode="layer"
     id="layer1">
    <rect
       style="fill:#000000;fill-opacity:0;stroke:#b8f2c0;stroke-width:1.765;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1"
       id="rect64"
       width="17.412052"
       height="14.759254"
       x="4.6953158"
       y="6.3479571" />
    <path
       style="color:#000000;fill:#b8f2c0;stroke:#1e5ec6;stroke-width:0.893728;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;-inkscape-stroke:none;fill-opacity:1"
       d="m 18.473931,12.674096 c -0.343119,0.02216 -0.663366,0.179774 -0.890237,0.438136 l -4.269736,3.491732 -3.9432253,-3.651717 c -0.5249634,-0.486257 -1.3446879,-0.454998 -1.8310948,0.06983 -0.4862588,0.524962 -0.4550014,1.344688 0.069822,1.831095 l 4.9189951,4.555918 c 0.534529,0.495368 1.372264,0.452769 1.853787,-0.09427 l 5.146007,-4.490193 c 0.473463,-0.536936 0.421877,-1.356055 -0.115207,-1.829349 -0.258011,-0.227445 -0.595856,-0.342991 -0.939112,-0.321184 z"
       id="path3177"
       sodipodi:nodetypes="ccccccccccc" />
  </g>
</svg>

</svg>
		</div>
		<div id="submit"></div>
		</div>
		<script>
			var note = window.location.hash;
			const xhr = new XMLHttpRequest();
			xhr.open("GET", "/api/readNote/" + localStorage.getItem("token") + "/" + note.toString().split('#')[1], true);
			xhr.onload = () => {
				var noteText = document.getElementById("note");
				noteText.value = xhr.responseText.toString().replace(/~n/g, '\n');
			};
			xhr.send();

			var commitButton = document.getElementById("commitButton");
			var deleteButton = document.getElementById("deleteButton");
			deleteButton.onclick = () => {
				console.log("click");
				var form = document.createElement("form");
				var token = document.createElement("input");
				var noteName = document.createElement("input");
				var deleteL = document.createElement("input");
				var submitButton = document.createElement("input");
				form.method = "post";
				token.type="text";
				token.name="token";
				token.value=localStorage.getItem("token");
				noteName.type = "text";
				noteName.name = "noteName";
				noteName.value = window.location.hash;
				deleteL.type = "text";
				deleteL.name = "deleteL";
				deleteL.value = "delete";
				submitButton.type="submit";
				form.appendChild(token);
				form.appendChild(noteName);
				form.appendChild(deleteL);
				form.appendChild(submitButton);
				document.getElementById("submit").appendChild(form);
				submitButton.click();
			};
				
			commitButton.onclick = () => {
				console.log("upload");
				var noteText = document.getElementById("note").value.toString().replace(/\n/g, "~n");
				var form = document.createElement("form");
				var text = document.createElement("input");
				var noteName = document.createElement("input");
				var token = document.createElement("input");
				var submitButton = document.createElement("input");
				form.method = "post";
				text.type = "text";
				text.name = "text";
				text.value = noteText;
				noteName.type = "text";
				noteName.name = "noteName";
				noteName.value = window.location.hash.toString();
				token.type = "text";
				token.name = "token";
				token.value = localStorage.getItem("token");
				submitButton.type="submit";
				form.appendChild(text);
				form.appendChild(noteName);
				form.appendChild(token);
				form.appendChild(submitButton);
				document.getElementById("submit").appendChild(form);
				submitButton.click();
			};
			var markdownBt = document.getElementById("markdown");
			markdownBt.onclick = () => {
               console.log("Show Markdown");
               var noteText = document.getElementById("note").value.toString().replace(/\n/g, "~n");
               var form = document.createElement("form");
               var text = document.createElement("input");
               var noteName = document.createElement("input");
               var token = document.createElement("input");
               var submitButton = document.createElement("input");
               form.method = "post";
               form.action = "/api/decMD/" + localStorage.getItem("token");
               text.type = "text";
               text.name = "text";
               text.value = noteText;
               noteName.type = "text";
               noteName.name = "noteName";
               noteName.value = window.location.hash.toString();
               token.type = "text";
               token.name = "token";
               token.value = localStorage.getItem("token");
               submitButton.type="submit";
               form.appendChild(text);
               form.appendChild(noteName);
               form.appendChild(token);
               form.appendChild(submitButton);
               document.getElementById("submit").appendChild(form);
               submitButton.click();
            };
		</script>
	</body>
</html>
